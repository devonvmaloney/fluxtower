<html>
 <head>
 <title>Flux towers</title>

 <link rel="stylesheet" 
     href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" 
    crossorigin=""/>
 
 <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" 
    integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
    crossorigin=""></script>
    
    <link rel="stylesheet" href="./Leaflet.markercluster-1.0.5/MarkerCluster.css"/> 
   <script src="./Leaflet.markercluster-1.0.5/leaflet.markercluster.js"></script>

 </head>
 
 <body>
      <h1>Flux Towers</h1>
      <h2>Global network of flux towers</h2>
      <body>Devon Maloney </body>
      <div class="container"></div>
      <div id="mapid"></div>
    
    <style>

        #mapid{ 
              width: 900px;
               height: 500px;
                }
      </style>
      
      <script src="flux_sites.geojson"></script>
       
       <script>


       var map = L.map('mapid').setView([35.91, -79.05], 6);
       L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);
      L.marker([35.911271, -79.049807]).addTo(map)
 
 var towerIcon = L.icon({ 
 iconUrl: 'pngfuel.com.png',
 iconSize: [50,50], 
 popupAnchor: [0,0] });

var customPopup = "Flux tower here";
L.geoJSON(fluxtowers, { 
pointToLayer: function (feature, latlng) { 
return L.marker(latlng, {icon: towerIcon});}}) 
.bindPopup(customPopup)
.addTo(map);


 //Attempted to aggrigate      
 //var towers =   L.geoJson(fluxtowers,{
  //pointToLayer: function(feature,latlng){
    //var marker = L.marker(latlng,{icon: towerIcon});
    //marker.bindPopup(feature.properties.Location + '<br/>' + feature.properties.OPEN_DT);
    //return marker;}});

//var clusters = L.markerClusterGroup();
//clusters.addLayer(towers);
//map.addLayer(clusters);
      
      
      </script>


 </body>
</html>